# Тестирование

Для тестирования используется библиотека flutter_test. Для golden-тестирования виджетов используется
[alchemist](https://github.com/Betterment/alchemist).

## Общие рекомендации

- Для тестирования рекомендуется использовать `DuitDriver.static` конструктор драйвера, чтобы не
  выполнять инициализацию транспортного слоя.
- Не пытайтесь вызвать выполнение действий, которые выполняются с помощью транспортного слоя.
  Используйте локальные действия или скрипты вместо этого.
- Для взаимодействия с драйвером используйте специальные методы, отмеченные
  аннотацией `@visibleForTesting`.

## Базовый сценарий тестирования виджета

В базовый сценарий тестирования входят следующие проверки:

- Golden-тесты с controlled/uncontrolled вариантами виджета.
- Тест на присвоения виджету корректного ключа на основе его id.
- Тест на корректное обновление свойств виджета.
- Тестирование пограничных случаев. Например, виджет DuitText не отображается в случае, если
  свойство атрибута `data` не было присвоено. [См.
  пример](https://github.com/Duit-Foundation/flutter_duit/blob/ca220c12bc95b94dc09d29ef41595a36424cef14/test/d_text_test.dart#L94C5-L94C15).
- Дополнительно: если класс атрибута виджета является наследником AnimatedPropertyOwner, следует
  проверить корректную работу анимации одного или нескольких
  свойств. [См. пример](https://github.com/Duit-Foundation/flutter_duit/blob/ca220c12bc95b94dc09d29ef41595a36424cef14/test/d_text_test.dart#L177)
- Дополнительно: если класс атрибута виджета является наследником AttendedModel, следует проверить
  корректную работу функций присвоения и получения значений из атрибута (
  методы `void update(T value)` и `T collect()`)